---
- name: Add VSCode key
  shell: wget -qO- https://packages.microsoft.com/keys/microsoft.asc | \
    gpg --dearmor > packages.microsoft.gpg && \
    install -o root -g root -m 644 packages.microsoft.gpg /etc/apt/trusted.gpg.d/ && \
    rm -rf packages.microsoft.gpg

- name: Add VSCode repository
  copy:
    src: vscode.list
    dest: /etc/apt/sources.list.d
    owner: root
    group: root
    mode: '0644'

- name: Update package cache
  apt:
    update_cache: yes

- name: Installing VSCode
  apt:
    name: "{{ vscode_package }}"
    state: present
